(this["webpackJsonpreact-d3"]=this["webpackJsonpreact-d3"]||[]).push([[0],{234:function(e,t,a){e.exports=a(347)},239:function(e,t,a){},241:function(e,t,a){},243:function(e,t,a){},343:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){"use strict";a.r(t);var r=a(0),i=a.n(r),n=a(7),o=a.n(n),s=a(52),c=a(20),l=a(179),d=a(12),h=a(13),u=a(15),m=a(14),v=a(16),p=(a(239),r.Component,a(19)),f=a.n(p),g=(a(240),a(241),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).markers=[],a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.data;this.processData(),this.map=f.a.map("map",{center:[33,12],zoom:2,attributionControl:!1,zoomControl:!0,doubleClickZoom:!0,scrollWheelZoom:!1,dragging:!0,layers:[f.a.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png")]});var a=(new f.a.LayerGroup).addTo(this.map),r=new f.a.LayerGroup,i=new f.a.LayerGroup,n=new f.a.LayerGroup;t.forEach((function(t){e.latlng[t.datakey]&&0!==t.confirmed&&f.a.circle(e.latlng[t.datakey],{color:"red",fillColor:"#f03",fillOpacity:.5,weight:2,radius:t.confirmed<1500?200*t.confirmed:4e5+20*(t.confirmed-5e3)}).bindTooltip(t.province&&t.province!==t.country?t.province+", "+t.country+": "+t.confirmed:t.country+": "+t.confirmed).addTo(a),e.latlng[t.datakey]&&0!==t.recovered&&f.a.circle(e.latlng[t.datakey],{color:"#099c44",fillColor:"#099c44",fillOpacity:.5,weight:2,radius:t.recovered<1500?200*t.recovered:4e5+20*(t.recovered-5e3)}).bindTooltip(t.province&&t.province!==t.country?t.province+", "+t.country+": "+t.recovered:t.country+": "+t.recovered).addTo(r),e.latlng[t.datakey]&&0!==t.deaths&&f.a.circle(e.latlng[t.datakey],{color:"#404040",fillColor:"#404040",fillOpacity:.5,weight:2,radius:t.deaths<1500?200*t.deaths:4e5+20*(t.deaths-5e3)}).bindTooltip(t.province&&t.province!==t.country?t.province+", "+t.country+": "+t.deaths:t.country+": "+t.deaths).addTo(i),e.latlng[t.datakey]&&0!==t.hospitalised&&f.a.circle(e.latlng[t.datakey],{color:"#EFCC00",fillColor:"#EFCC00",fillOpacity:.5,weight:2,radius:t.hospitalised<1500?200*t.hospitalised:4e5+20*(t.hospitalised-5e3)}).bindTooltip(t.province&&t.province!==t.country?t.province+", "+t.country+": "+t.hospitalised:t.country+": "+t.hospitalised).addTo(n)})),f.a.control.layers({Confirmed:a,Deaths:i,Recovered:r,Active:n},null,{collapsed:!1}).addTo(this.map)}},{key:"componentWillReceiveProps",value:function(e){e.pan.adding&&this.latlng[e.pan.selection]&&this.map.setView(this.latlng[e.pan.selection],4)}},{key:"processData",value:function(){var e=this.props.location;this.latlng=e.reduce((function(e,t){return e[t.province+", "+t.country]=f.a.latLng(t.lat,t.long),e}),{})}},{key:"render",value:function(){return i.a.createElement("div",{id:"map"})}}]),t}(r.Component)),y=a(351),b=a(41),_=a(350),k=a(158),E=a.n(k),C=a(352),O=(a(242),a(243),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).getColumnSearchProps=function(e){return{filterDropdown:function(t){var r=t.setSelectedKeys,n=t.selectedKeys,o=t.confirm,s=t.clearFilters;return i.a.createElement("div",{style:{padding:8}},i.a.createElement(y.a,{ref:function(e){a.searchInput=e},placeholder:"Search ".concat(e),value:n[0],onChange:function(e){return r(e.target.value?[e.target.value]:[])},onPressEnter:function(){return a.handleSearch(n,o,e)},style:{width:188,marginBottom:8,display:"block"}}),i.a.createElement(b.a,{type:"primary",onClick:function(){return a.handleSearch(n,o,e)},icon:i.a.createElement(C.a,null),size:"small",style:{width:90,marginRight:8}},"Search"),i.a.createElement(b.a,{onClick:function(){return a.handleReset(s)},size:"small",style:{width:90}},"Reset"))},filterIcon:function(e){return i.a.createElement(C.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(t,a){return a[e].toString().toLowerCase().includes(t.toLowerCase())},onFilterDropdownVisibleChange:function(e){e&&setTimeout((function(){return a.searchInput.select()}))},render:function(t){return a.state.searchedColumn===e?i.a.createElement(E.a,{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[a.state.searchText],autoEscape:!0,textToHighlight:t.toString()}):t}}},a.handleSearch=function(e,t,r){t(),a.setState({searchText:e[0],searchedColumn:r})},a.handleReset=function(e){e(),a.setState({searchText:""})},a.handleChange=function(e,t,r){a.setState({sortedInfo:r})},a.handleClick=function(e){a.timer&&clearTimeout(a.timer),a.timer=setTimeout((function(){var t=e.map((function(e){return a.data[Number(e)].datakey}));a.props.handleSelection(e,t)}),500)},a.state={searchText:"",searchedColumn:"",sortedInfo:null},a.data=a.props.data.map((function(e,t){return Object(s.a)({key:String(t)},e)})),a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this.state.sortedInfo;e=e||{};var t=[Object(s.a)({title:"State",dataIndex:"province",key:"province"},this.getColumnSearchProps("province")),Object(s.a)({title:"Country",dataIndex:"country",key:"country"},this.getColumnSearchProps("country")),{title:"Confirmed",dataIndex:"confirmed",key:"confirmed",sorter:function(e,t){return Number(e.confirmed)-Number(t.confirmed)},sortOrder:"confirmed"===e.columnKey&&e.order,ellipsis:!0},{title:"Deaths",dataIndex:"deaths",key:"deaths",sorter:function(e,t){return Number(e.deaths)-Number(t.deaths)},sortOrder:"deaths"===e.columnKey&&e.order,ellipsis:!0},{title:"Recovered",dataIndex:"recovered",key:"recovered",sorter:function(e,t){return Number(e.recovered)-Number(t.recovered)},sortOrder:"recovered"===e.columnKey&&e.order,ellipsis:!0},{title:"Active",dataIndex:"hospitalised",key:"hospitalised",sorter:function(e,t){return Number(e.hispital)-Number(t.hispital)},sortOrder:"hospitalised"===e.columnKey&&e.order,ellipsis:!0}],a={onChange:this.handleClick};return i.a.createElement("div",{className:"table-container"},i.a.createElement(_.a,{columns:t,dataSource:this.data,onChange:this.handleChange,rowSelection:a}))}}]),t}(r.Component)),D=a(2),S=function(e,t,a,r){return D.q("#"+e).append("svg").attr("viewBox",r).style("width",t).style("height",a)},x=(a(343),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).margin={top:20,right:20,bottom:30,left:50},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.id,r=t.width,i=t.height;this.processData(),this.svg=S(a,r,i,[0,0,r,i]);var n=D.g,o=D.m().domain([0,D.k(this.total,(function(e){return e.value}))]).nice().range([i-this.margin.bottom,this.margin.top]),s=D.o().domain(D.i(this.total,(function(e){return e.date}))).range([this.margin.left,r-this.margin.right]);this.area=D.b().curve(n).x((function(e){return s(e.date)})).y0(o(0)).y1((function(e){return o(e.value)})),this.svg.append("path").datum(this.total).attr("fill","steelblue").attr("d",this.area),this.svg.append("path").attr("class","selected").attr("fill",this.props.color).attr("class","selected"),this.svg.append("g").call((function(t){return t.attr("transform","translate(0,".concat(i-e.margin.bottom,")")).call(D.c(s).ticks(r/70).tickFormat(D.s("%m/%d")).tickSizeOuter(0))})).selectAll("text").attr("y",0).attr("x",15).attr("dy","1.5em").attr("transform","rotate(30)"),this.svg.append("g").call((function(t){return t.attr("transform","translate(".concat(e.margin.left,",0)")).call(D.d(o)).call((function(e){return e.select(".domain").remove()})).call((function(t){return t.select(".tick:last-of-type text").clone().attr("x",3).attr("y",5).attr("text-anchor","end").attr("font-weight","bold").attr("transform","rotate(-90)").text(e.props.y)}))}))}},{key:"processData",value:function(){var e=this,t=this.props.data;this.total=t[0].data;for(var a=1;a<t.length;a++)t[a].data.forEach((function(t,a){e.total[a].value+=t.value}));this.total.forEach((function(e){"string"===typeof e.date&&(e.date=D.t("%m/%d/%Y")(e.date+"20"))}))}},{key:"update",value:function(){var e=this,t=this.props,a=t.selected,r=t.data;if(this.selectedData=null,a&&a.length>0)for(var i=0;i<r.length;i++)Array.isArray(a)&&a.indexOf(r[i].province+", "+r[i].country)>=0&&(Array.isArray(this.selectedData)?r[i].data.forEach((function(t,a){e.selectedData[a].value+=t.value})):this.selectedData=JSON.parse(JSON.stringify(r[i].data)));this.selectedData&&0!==this.selectedData.length||(this.selectedData=r[0].data.map((function(e){return{date:e.date,value:0}}))),Array.isArray(this.selectedData)&&(this.selectedData.forEach((function(e){"string"===typeof e.date&&(e.date=D.t("%m/%d/%Y")(e.date+"20"))})),this.svg&&this.svg.select(".selected").datum(this.selectedData).transition().duration(2e3).attr("d",this.area).end())}},{key:"render",value:function(){return i.a.createElement("div",{id:this.props.id},this.update())}}]),t}(r.Component)),j=(a(344),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).margin={top:20,right:20,bottom:30,left:50},a}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.id,r=t.width,i=t.height;t.confirmed,t.recovered,t.deaths;this.processData(),this.svg=S(a,r,i,[0,0,r,i]),this.yAxis=function(t){return t.attr("transform","translate(".concat(e.margin.left,",0)")).call(D.d(e.y)).call((function(e){return e.select(".domain").remove()})).call((function(t){return t.select(".tick:last-of-type text").attr("x",3).attr("y",5).attr("text-anchor","end").attr("font-weight","bold").attr("transform","rotate(-90)").text(e.props.y)}))};this.series=D.r().keys(Object.keys(this.total[0]).slice(1))(this.total),this.y=D.m().domain([0,D.k(this.series,(function(e){return D.k(e,(function(e){return e[1]}))}))]).nice().range([i-this.margin.bottom,this.margin.top]),this.x=D.o().domain(D.i(this.total,(function(e){return e.date}))).range([this.margin.left,r-this.margin.right]),this.area=D.b().curve(D.g).x((function(t){return e.x(t.data.date)})).y0((function(t){return e.y(t[0])})).y1((function(t){return e.y(t[1])}));var n=D.n().domain(Object.keys(this.total[0]).slice(1)).range(D.p);this.svg.append("g").selectAll("path").data(this.series).join("path").attr("fill",(function(e){var t=e.key;return n(t)})).attr("d",this.area).append("title").text((function(e){return e.key})),this.svg.append("g").call((function(t){return t.attr("transform","translate(0,".concat(i-e.margin.bottom,")")).call(D.c(e.x).ticks(8).tickFormat(D.s("%m/%d")).tickSizeOuter(0))})).selectAll("text").attr("y",0).attr("x",0).attr("dy","1.8em"),this.svg.append("g").attr("id","y-axis").call(this.yAxis)}},{key:"processData",value:function(){var e=this.props,t=e.confirmed,a=e.recovered,r=e.deaths;this.total=[];for(var i=1;i<t.length;i++)for(var n=0;n<Math.min(t[i].data.length,a[i].data.length,r[i].data.length);n++)void 0===this.total[n]&&this.total.push({}),void 0===this.total[n].date&&(this.total[n].date=t[i].data[n].date),void 0===this.total[n].active&&(this.total[n].active=0),void 0===this.total[n].recovered&&(this.total[n].recovered=0),void 0===this.total[n].deaths&&(this.total[n].deaths=0),this.total[n].active+=t[i].data[n].value-a[i].data[n].value-r[i].data[n].value,this.total[n].recovered+=a[i].data[n].value,this.total[n].deaths+=r[i].data[n].value;this.total.forEach((function(e){"string"===typeof e.date&&(e.date=D.t("%m/%d/%Y")(e.date+"20"))}))}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props,a=t.selected,r=t.confirmed,i=t.recovered,n=t.deaths,o=t.height;if(this.selectedData=[],null!=a&&a.length>0)for(var s=0;s<r.length;s++)if(Array.isArray(a)&&a.indexOf(r[s].province+", "+r[s].country)>=0)for(var c=0;c<Math.min(r[s].data.length,i[s].data.length,n[s].data.length);c++)void 0===this.selectedData[c]&&this.selectedData.push({}),void 0===this.selectedData[c].date&&(this.selectedData[c].date=r[s].data[c].date),void 0===this.selectedData[c].active&&(this.selectedData[c].active=0),void 0===this.selectedData[c].recovered&&(this.selectedData[c].recovered=0),void 0===this.selectedData[c].deaths&&(this.selectedData[c].deaths=0),this.selectedData[c].active+=r[s].data[c].value-i[s].data[c].value-n[s].data[c].value,this.selectedData[c].recovered+=i[s].data[c].value,this.selectedData[c].deaths+=n[s].data[c].value;this.selectedData&&0!==this.selectedData.length?(this.selectedData.forEach((function(e){"string"===typeof e.date&&(e.date=D.t("%m/%d/%Y")(e.date+"20"))})),this.svg&&(this.series=D.r().keys(Object.keys(this.selectedData[0]).slice(1))(this.selectedData),this.y=D.m().domain([0,D.k(this.series,(function(e){return D.k(e,(function(e){return e[1]}))}))]).nice().range([o-this.margin.bottom,this.margin.top]),this.area=D.b().curve(D.g).x((function(t){return e.x(t.data.date)})).y0((function(t){return e.y(t[0])})).y1((function(t){return e.y(t[1])})),this.svg.select("#y-axis").transition().duration(2e3).call(this.yAxis),this.svg.selectAll("path").data(this.series).transition().duration(2e3).attr("d",this.area).end())):(this.series=D.r().keys(Object.keys(this.total[0]).slice(1))(this.total),this.y=D.m().domain([0,D.k(this.series,(function(e){return D.k(e,(function(e){return e[1]}))}))]).nice().range([o-this.margin.bottom,this.margin.top]),this.area=D.b().curve(D.g).x((function(t){return e.x(t.data.date)})).y0((function(t){return e.y(t[0])})).y1((function(t){return e.y(t[1])})),this.svg.select("#y-axis").transition().duration(2e3).call(this.yAxis),this.svg.selectAll("path").data(this.series).transition().duration(2e3).attr("d",this.area).end())}},{key:"render",value:function(){return i.a.createElement("div",{id:this.props.id})}}]),t}(r.Component)),w=(a(345),r.Component,a(349)),N=(a(346),w.a.Header),T=w.a.Content,A=w.a.Sider,K=function(e){function t(e){var a,r;return Object(d.a)(this,t),(r=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleSelection=function(e,t){r.pan.adding=e.length>r.state.selected.length,r.pan.selection=t[Math.max(0,t.length-1)],r.setState({selected:Object(l.a)(t)})},r.state={selected:[],covid_19_data:!1,time_series_covid_19_confirmed:!1},r.pan={},r.mapping=(a={},Object(c.a)(a,", South Korea",", Republic of Korea"),Object(c.a)(a,"UK, UK",", UK"),Object(c.a)(a,"Hong Kong, Mainland China","Hong Kong, Hong Kong SAR"),Object(c.a)(a,", Taiwan","Taiwan, Taipei and environs"),Object(c.a)(a,"Diamond Princess cruise ship, US","Diamond Princess cruise ship, Others"),Object(c.a)(a,"Macau, Mainland China","Macau, Macao SAR"),Object(c.a)(a,"Channel Islands, UK",", Channel Islands"),Object(c.a)(a,"Gibraltar, UK",", Gibraltar"),a),r.dates=["1/22/20","1/23/20","1/24/20","1/25/20","1/26/20","1/27/20","1/28/20","1/29/20","1/30/20","1/31/20","2/1/20","2/2/20","2/3/20","2/4/20","2/5/20","2/6/20","2/7/20","2/8/20","2/9/20","2/10/20","2/11/20","2/12/20","2/13/20","2/14/20","2/15/20","2/16/20","2/17/20","2/18/20","2/19/20","2/20/20","2/21/20","2/22/20","2/23/20","2/24/20","2/25/20","2/26/20","2/27/20","2/28/20","2/29/20","3/1/20","3/2/20","3/3/20","3/4/20","3/5/20","3/6/20","3/7/20","3/8/20","3/9/20","3/10/20","3/11/20"],r}return Object(v.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=this;D.f("./covid/covid_19_data.csv").then((function(t){e.covid_19_data=t.map((function(e){return{date:e.ObservationDate,province:e["Province/State"],country:e["Country/Region"],confirmed:Number(e.Confirmed),deaths:Number(e.Deaths),recovered:Number(e.Recovered)}})),e.covid_19_data=e.covid_19_data.map((function(t){var a=t.province+", "+t.country;return a=e.mapping[a]?e.mapping[a]:a,Object(s.a)({},t,{hospitalised:t.confirmed-t.deaths-t.recovered,datakey:a})})),e.latestStats=e.covid_19_data.filter((function(e){return"03/11/20"===e.date})),e.simpleStats=e.latestStats.reduce((function(e,t){return e.confirmed+=t.confirmed,e.deaths+=t.deaths,e.recovered+=t.recovered,e.hospitalised+=t.hospitalised,e}),{confirmed:0,deaths:0,recovered:0,hospitalised:0}),e.setState({covid_19_data:!0})})),D.f("./covid/time_series_covid_19_confirmed.csv").then((function(t){e.time_series_covid_19_confirmed=t.map((function(t){return e.processData(t)})),e.setState({time_series_covid_19_confirmed:!0})})),D.f("./covid/time_series_covid_19_recovered.csv").then((function(t){e.time_series_covid_19_recovered=t.map((function(t){return e.processData(t)})),e.setState({time_series_covid_19_recovered:!0})})),D.f("./covid/time_series_covid_19_deaths.csv").then((function(t){e.time_series_covid_19_deaths=t.map((function(t){return e.processData(t)})),e.setState({time_series_covid_19_deaths:!0})}))}},{key:"processData",value:function(e){var t=this.dates.reduce((function(t,a){return t.push({date:a,value:Number(e[a])}),t}),[]);return{province:e["Province/State"],country:e["Country/Region"],lat:e.Lat,long:e.Long,data:t}}},{key:"render",value:function(){var e=this.state,t=e.covid_19_data,a=e.time_series_covid_19_confirmed,r=e.time_series_covid_19_recovered,n=e.time_series_covid_19_deaths,o=e.selected;return i.a.createElement(w.a,null,i.a.createElement(A,{style:{overflow:"auto",height:"100vh",position:"fixed",right:0}},t&&i.a.createElement("div",{className:"text-box"},i.a.createElement("div",{className:"vis-block"},i.a.createElement("span",null,"Total Confirmed"),i.a.createElement("h1",null,this.simpleStats.confirmed.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))),i.a.createElement("div",{className:"vis-block"},i.a.createElement("span",null,"Total Deaths"),i.a.createElement("h1",null,this.simpleStats.deaths.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))),i.a.createElement("div",{className:"vis-block"},i.a.createElement("span",null,"Total Recovered"),i.a.createElement("h1",null,this.simpleStats.recovered.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","))),i.a.createElement("div",{className:"vis-block"},i.a.createElement("span",null,"Total Active"),i.a.createElement("h1",null,this.simpleStats.hospitalised.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")))),t&&i.a.createElement(O,{data:this.latestStats,handleSelection:this.handleSelection})),i.a.createElement(w.a,{className:"site-layout"},i.a.createElement(N,{className:"site-layout-background",style:{padding:0}},i.a.createElement("h1",null,"Covid-19 DataViz")),i.a.createElement(T,{style:{width:"100%",height:"100vh",overflow:"initial"}},i.a.createElement("br",null),i.a.createElement("br",null),t&&a&&i.a.createElement(g,{data:this.latestStats,location:this.time_series_covid_19_confirmed,pan:this.pan}),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),r&&a&&n&&i.a.createElement(j,{id:"stacked-chart",width:"800",height:"400",confirmed:this.time_series_covid_19_confirmed,recovered:this.time_series_covid_19_recovered,deaths:this.time_series_covid_19_deaths,y:"Cummulated Cases",selected:this.state.selected}),i.a.createElement("div",null,a&&i.a.createElement("div",{className:"vis-block"},i.a.createElement(x,{id:"confirmed-area-chart",width:"270",height:"400",data:this.time_series_covid_19_confirmed,selected:o,color:"red",y:"Cummulated Confirmed Cases"})),n&&i.a.createElement("div",{className:"vis-block"},i.a.createElement(x,{id:"deaths-area-chart",width:"270",height:"400",data:this.time_series_covid_19_deaths,selected:o,color:"gray",y:"Cummulated Death Cases"})),r&&i.a.createElement("div",{className:"vis-block"},i.a.createElement(x,{id:"recovered-area-chart",width:"270",height:"400",data:this.time_series_covid_19_recovered,selected:o,color:"lightgreen",y:"Cummulated Recovered Cases"}))))))}}]),t}(r.Component);o.a.render(i.a.createElement(K,null),document.getElementById("root"))}},[[234,1,2]]]);
//# sourceMappingURL=main.14f9d709.chunk.js.map